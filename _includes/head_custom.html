<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

<script>
document.addEventListener('DOMContentLoaded', () => {
  // ======= Textos visibles =======
  const SITE_TITLE_TEXT = 'Idle Runner — One Page GDD'; // lateral arriba

  // 1) Cambiar el título grande de la sidebar
  const siteTitle = document.querySelector('.site-title');
  if (siteTitle) siteTitle.textContent = SITE_TITLE_TEXT;

  // 2) Construir el índice de secciones (H2) en la navegación izquierda
  const navList = document.querySelector('.side-bar .navigation .navigation-list');
  if (navList) {
    navList.innerHTML = ''; // vaciar lo que ponga el tema
    const sections = Array.from(document.querySelectorAll('h2[id]'));
    sections.forEach(sec => {
      const li = document.createElement('li');
      li.className = 'navigation-list-item';
      const a = document.createElement('a');
      a.className = 'navigation-list-link';
      a.href = '#' + sec.id;
      a.textContent = sec.textContent.replace(/^\s*[\W_]+/, '');
      li.appendChild(a);
      navList.appendChild(li);
    });
  }

  // 3) Botón para plegar/desplegar la barra lateral
  if (!document.querySelector('.sidebar-toggle')) {
    const btn = document.createElement('button');
    btn.className = 'sidebar-toggle';
    btn.setAttribute('aria-label', 'Mostrar/ocultar índice');
    btn.title = 'Mostrar/ocultar índice';
    btn.innerHTML = '⟨⟩';
    document.body.appendChild(btn);
    btn.addEventListener('click', () => {
      document.body.classList.toggle('sidebar-collapsed');
    });
  }

  // 4) Asegurar que no aparece título centrado extra en la cabecera
  const topCenter = document.querySelector('.top-center-title');
  if (topCenter) topCenter.remove();
});
</script>
